# IEC 60870-5-104 - Telecontrol Protocol for Network Access

**Status:** International Standard (Reference for KRTM)
**Full name:** IEC 60870-5-104:2006 - Telecontrol equipment and systems - Part 5-104: Transmission protocols - Network access for IEC 60870-5-101 using standard transport profiles
**Latest edition:** 2006 (with amendments)
**Ukrainian equivalent:** ДСТУ IEC 60870-5-104 (прийнятий в Україні)

## Сфера застосування

Протокол для телемеханіки та диспетчерського управління:

- SCADA системи
- Енергетика (електростанції, підстанції)
- Водопостачання та водовідведення
- Теплопостачання (котельні, ТЕЦ)
- Газопостачання

## Основні характеристики

**Базовий протокол:**

- IEC 60870-5-101 (serial RS-232/RS-485) → 104 адаптує для TCP/IP

**Transport Layer:**

- TCP/IP (port 2404 default)
- Client-Server architecture
- Multiple connections support

**Data Types:**

- Monitoring data (telemetering): analog values, status
- Control commands: single/double commands, set points
- Time synchronization

**Quality descriptors:**

- Valid/Invalid
- Substituted
- Overflow
- Time tag quality

## Ключові концепції

**ASDU (Application Service Data Unit):**

- Type Identification - тип даних (30+ типів)
- Common Address - адреса станції
- Information Object Address - адреса точки даних

**Information Object Types (приклади):**

- M_SP_NA_1: Single-point information (status)
- M_ME_NA_1: Measured value, normalized (analog)
- M_ME_NC_1: Short floating point measurement
- C_SC_NA_1: Single command
- M_SP_TB_1: Single-point with time tag

**COT (Cause of Transmission):**

- Spontaneous (спонтанна зміна)
- Interrogation (опитування)
- Request (запит)

## KRTM Usage Context

**Чому IEC 60870-5-104 relevant для KRTM?**

KRTM використовує **Modbus TCP** та **MQTT**, а НЕ IEC 104 безпосередньо. Але:

1. **Interoperability requirement** (Section 3.3.3 TZ):
   - "OPC UA server/client capability for system interoperability"
   - IEC 104 - **стандартний протокол** для SCADA в енергетиці України
   - Можлива інтеграція з зовнішніми системами (обленерго, Укренерго)

2. **Reference architecture:**
   - IEC 104 використовується для диспетчерського управління в електромережах
   - KRTM має подібну архітектуру (ЦДП → віддалені котельні)

3. **Alternative protocol (future):**
   - Якщо потрібна інтеграція з існуючою SCADA системою Криворіжтепломережі
   - ThingsBoard IoT Gateway може підтримувати IEC 104 через custom connector

**KRTM Current Stack:**

- **Field Level:** Modbus RTU (RS-485) - для лічильників та котельного обладнання
- **Edge-to-Cloud:** MQTT over TLS - для Edge Nodes → ThingsBoard ЦДП
- **Interoperability:** OPC UA server - для зовнішніх систем

**IEC 104 vs MQTT для KRTM:**
| Критерій | IEC 60870-5-104 | MQTT |
|----------|-----------------|------|
| Призначення | SCADA/telecontrol | IoT messaging |
| Architecture | Client-Server | Pub-Sub |
| Latency | Low (direct) | Very low (async) |
| Bandwidth | Medium | Low (efficient) |
| Security | Basic (часто без TLS) | TLS 1.3+ built-in |
| Edge support | Limited | Excellent (lightweight) |
| Cost | Higher (licensed) | Lower (open source) |

**Висновок для KRTM:**

- ✅ MQTT - primary protocol (оптимальний для Edge Computing)
- ✅ OPC UA - для interoperability
- ℹ️ IEC 104 - опціонально (якщо потрібна інтеграція з legacy SCADA)

## Security Considerations

**IEC 104 Security Issues:**

- Протокол розроблено в 2000-х (до кіберзагроз)
- Немає вбудованого шифрування
- Аутентифікація відсутня в базовій специфікації
- **Рекомендація:** IEC 104 over VPN або IPsec

**IEC 62443-3-3 recommendations:**

- Use IEC 104 тільки в захищених зонах (OT network)
- Додаткові механізми: TLS wrapper, firewall rules

## Compliance Notes

**For KRTM Project:**

- ✅ Reference standard (не використовується безпосередньо)
- ✅ Згадати в Section 3.3.3 TZ (Interoperability) як альтернативний протокол
- ✅ OPC UA - preferred для міжсистемної взаємодії

**Legislation:**

- ДСТУ IEC 60870-5-104 прийнятий в Україні (електроенергетика)
- Обов'язковий для об'єктів електромереж (Укренерго, обленерго)
- Не обов'язковий для теплопостачання (але корисний для інтеграції)

## Official Source

- **IEC Webstore:** https://webstore.iec.ch/publication/3745
- **ДСТУ version:** Verify on e-construction.gov.ua or ukrndnc.org.ua
- **Protocol specification:** IEC TC 57 (Power systems management)

## Cross-references

- IEC 60870-5-101 - serial version (базовий протокол)
- IEC 61850 - modern standard для Smart Grid (alternative)
- OPC UA - KRTM interoperability protocol (preferred)
- Modbus TCP - KRTM field protocol (primary)

---

**Created:** 2025-11-11 15:15:00 EET
**Maintainer:** Mary (Business Analyst)
**KRTM Relevance:** MEDIUM (reference; не primary protocol для KRTM)
**KRTM Stack:** Modbus RTU + MQTT + OPC UA (IEC 104 - optional future integration)
**Last verified:** 2025-11-11
